<div class="container">
	<div class="container--scroll">
		<header class="grid gp-16 pd-12">
			<nav class="flex bet gp-8">
				<div class="flex gp-4">
					<app-component-button [type]="'MINI'" [icon]="'navigate_before'" (click)="core.back()" />
					@defer (when library().status === complete) {
						<h1>{{ library().title }}</h1>
					} @placeholder {
						<app-component-loading />
					}
				</div>

				<app-component-button [type]="'MINI'" [icon]="'more_vert'" (click)="libraries.redirect('menu')" />
			</nav>

			<article class="grid gp-8">
				<div class="flex bet bd br-4 pd-12">
					<div class="flex gp-8">
						<app-component-button [type]="'ICON'" [icon]="'done_all'" color="#c3c3c3" />
						<p class="disabled">ID</p>
					</div>
					<app-component-button [type]="'ICON'" [icon]="'mic'" [color]="'#c3c3c3'" />
				</div>
				<p class="tx-left tx-visible disabled">La Inteligencia Artificial para optimizar tu negocio.</p>
			</article>
		</header>

		<main class="fle col gp-12 pd-12">
			@defer (when library().status === complete) {
				@if (library().collections.length > 0) {
					@for (collection of library().collections; track $index) {
						@if (collection.data.elements.length > 0) {
							<mat-accordion class="expansion-panel-pd grid gp-16">
								<mat-expansion-panel [expanded]="true">
									<mat-expansion-panel-header style="background-color: var(--grey-light); padding: 12px 20px 12px 12px; height: 48px">
										<mat-panel-title>{{ collection.data.title }}</mat-panel-title>
									</mat-expansion-panel-header>

									<div class="dinamic bd">
										<div>
											@for (element of collection.data.elements; track $index) {
												<article class="grid">
													<button
														type="button"
														class="btn grid gp-8"
														[style]="element.media ? 'grid-template-columns: max-content 1fr' : 'grid-template-columns: 1fr'"
													>
														<!-- [style]="element.image || element.icon ? 'grid-template-columns: max-content 1fr' : 'grid-template-columns: 1fr'" -->
														<!-- (click)="item.config.checkbox ? check(item.items, $index, item.config.multiple) : ''" -->
														@if (element.media) {
															<app-component-img [src]="element.media" [width]="'100px'" [height]="'100px'" />
														}

														<!-- @if (element?.icon) {
															<app-component-button [type]="'ICON'" [icon]="'calendar_month'" class="pd-12" />
														} -->

														<div class="grid tx-left h" style="padding: 4px" [style]="collection.data.miniature.style">
															@if (collection.data.miniature.headerboard.length > 0) {
																<p class="required tx-visible">
																	@for (item of collection.data.miniature.headerboard; track $index) {
																		{{ element[item] }}
																	}
																</p>
															}

															@if (collection.data.miniature.title.length > 0) {
																@for (item of collection.data.miniature.title; track $index) {
																	{{ element[item] }}
																}
															}

															@if (collection.data.miniature.subtitle.length > 0) {
																<p class="tx-visible">
																	@for (item of collection.data.miniature.subtitle; track $index) {
																		{{ element[item] }}
																	}
																</p>
															}
														</div>
													</button>

													<app-component-button
														[type]="'MINI'"
														[icon]="library().selected === element.id ? 'check_circle' : 'radio_button_unchecked'"
														[color]="'var(--violet)'"
														class="grid-place h pd-12"
														(click)="select(element.id)"
													/>
												</article>

												@if (!$last) {
													<hr />
												}
											}
										</div>

										<button type="button" class="expansion-footer" style="justify-content: flex-end" (click)="redirect(collection.data.id)">
											<app-component-button [type]="'ICON'" [icon]="'navigate_next'" />
										</button>
									</div>
								</mat-expansion-panel>
							</mat-accordion>
						}
					}
				}
			} @placeholder {
				<app-component-loading />
			}
		</main>
	</div>

	<footer>
		@defer (when library().status === complete) {
			@if (library().disminutive) {
				<div style="position: relative">
					<button type="button" class="flex gp-8 br-4">
						<app-component-button [type]="'ICON'" [icon]="'add'" />

						{{ 'Nuevo ' + library().disminutive }}
					</button>
				</div>
			}

			<h2 class="tx-visible tx-center pd-8">TÃ­tulo</h2>
		}
	</footer>
</div>
