<div class="container">
	<div class="container--scroll">
		<header class="grid gp-16 pd-12">
			<nav class="flex bet gp-8">
				<div class="flex gp-4">
					<app-component-button [type]="'MINI'" [icon]="'navigate_before'" (click)="core.back()" />
					<h1>{{ library?.name }}</h1>
				</div>

				<app-component-button [type]="'MINI'" [icon]="'more_vert'" (click)="libraries.redirect('menu')" />
			</nav>

			<article class="grid gp-8">
				<div class="flex bet bd br-4 pd-12">
					<div class="flex gp-8">
						<app-component-button [type]="'ICON'" [icon]="'done_all'" color="#c3c3c3" />
						<p class="disabled">ID</p>
					</div>
					<app-component-button [type]="'ICON'" [icon]="'mic'" [color]="'#c3c3c3'" />
				</div>
				<p class="tx-left tx-visible disabled">La Inteligencia Artificial para optimizar tu negocio.</p>
			</article>
		</header>

		<main class="fle col gp-12 pd-12">
			@for (item of library?.book; track $index) {
				<mat-accordion class="expansion-panel-pd grid gp-16">
					<mat-expansion-panel [expanded]="true">
						<mat-expansion-panel-header style="background-color: var(--grey-light); padding: 12px 20px 12px 12px; height: 48px">
							<mat-panel-title>{{ item.header }}</mat-panel-title>
						</mat-expansion-panel-header>

						<div class="dinamic bd">
							<div>
								@for (a of item.items; track $index) {
									<article class="grid">
										<button
											type="button"
											class="btn grid gp-8"
											[style]="a.image || a.icon ? 'grid-template-columns: max-content 1fr' : 'grid-template-columns: 1fr'"
											(click)="item.config.checkbox ? check(item.items, $index, item.config.multiple) : ''"
										>
											@if (a.image) {
												<app-component-img [src]="a.image" [width]="'100px'" [height]="'100px'" />
											}

											@if (a.icon) {
												<app-component-button [type]="'ICON'" [icon]="'calendar_month'" class="pd-12" />
											}

											<div class="grid tx-left h" [style]="a.cInfo" style="padding: 4px">
												@if (a.headerboard) {
													<p class="required tx-visible">{{ a.headerboard }}</p>
												}

												{{ a.title }}

												@if (a.subtitle) {
													<p class="tx-visible">{{ a.subtitle }}</p>
												}
											</div>
										</button>

										@if (item.config.checkbox) {
											<app-component-button
												[type]="'MINI'"
												[icon]="a.check ? 'check_circle' : 'radio_button_unchecked'"
												[color]="'var(--violet)'"
												class="grid-place h pd-12"
												(click)="item.config.checkbox ? check(item.items, $index, item.config.multiple) : null"
											/>
										}
									</article>

									@if (!$last) {
										<hr />
									}
								}
							</div>

							@if (item.config.footer) {
								<button type="button" class="expansion-footer bet" [style]="!item.footer ? 'justify-content: flex-end' : ''">
									{{ item.footer ? item.footer : '' }}

									<app-component-button
										[type]="'ICON'"
										[icon]="'navigate_next'"
										(click)="item.redirect ? sell.redirect(item.redirect) : ''"
									/>
								</button>
							}
						</div>
					</mat-expansion-panel>
				</mat-accordion>
			}
		</main>
	</div>

	@defer {
		<footer>
			@defer (when false) {
				@if (false) {
					<div style="position: relative">
						<button type="button" class="flex gp-8 br-4">
							<app-component-button [type]="'ICON'" [icon]="'add'" />

							{{ 'Nuevo ' + library?.disminutive }}
						</button>
					</div>
				}
			}

			<h2 class="tx-visible tx-center pd-8">TÃ­tulo</h2>
		</footer>
	}
</div>
